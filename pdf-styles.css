/* PDF Print Styles - Fixes formatting, page breaks, and content cut-off issues */

/* Snapshot-friendly styles for html2canvas/jsPDF (applied via .pdf-snapshot class) */
.pdf-snapshot, .pdf-snapshot * {
  box-sizing: border-box;
}

.pdf-snapshot .print-grid {
  display: grid;
  grid-template-columns: 80px repeat(5, 1fr);
  border: 2px solid #000;
  width: 100%;
  gap: 0;
}

.pdf-snapshot .print-header {
  font-weight: bold;
  text-align: center;
  padding: 12px 4px;
  border: 1px solid #999;
  background: #d9d9d9;
  font-size: 18px;
  line-height: 1.4;
  min-height: 50px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* CRITICAL FIX: Day header with proper spacing - uses min-height instead of fixed height */
.pdf-snapshot .print-day-header {
  background: #595959;
  color: white;
  font-weight: bold;
  padding: 16px 8px;
  min-height: 90px;
  margin-bottom: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid #999;
  font-size: 16px;
  line-height: 1.3;
  word-wrap: break-word;
  overflow-wrap: break-word;
  white-space: normal;
}

.pdf-snapshot .print-period-label {
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  font-weight: bold;
  background: #fde9d9;
  border: 1px solid #999;
  font-size: 13px;
  min-height: 140px;
  padding: 8px 4px;
}

/* CRITICAL FIX: Cell content wrapping */
.pdf-snapshot .print-cell {
  border: 1px solid #999;
  padding: 8px;
  vertical-align: top;
  min-height: 140px;
  white-space: normal !important;
  overflow-wrap: anywhere;
  word-break: break-word;
  hyphens: auto;
}

.pdf-snapshot .print-cell * {
  white-space: normal !important;
  overflow-wrap: anywhere;
  word-break: break-word;
  hyphens: auto;
}

.pdf-snapshot .print-session {
  border-radius: 4px;
  padding: 8px;
  font-size: 15px;
  margin-bottom: 8px;
  border: 1px solid black;
  line-height: 1.4;
  break-inside: avoid;
  page-break-inside: avoid;
  white-space: normal;
  overflow-wrap: break-word;
  word-break: break-word;
}

.pdf-snapshot .print-session.compulsory {
  border: 4px solid #ffff00;
  box-shadow: 0 0 0 1px #ffd700;
}

.pdf-snapshot .print-session.online {
  border: 3px solid #3b82f6;
}

.pdf-snapshot .print-session.blended {
  border: 3px solid #3b82f6;
}

.pdf-snapshot .print-session.compulsory.online {
  border: 4px solid #ffff00;
  box-shadow: 0 0 0 1px #ffd700, 0 0 0 4px #3b82f6;
}

.pdf-snapshot .print-session.compulsory.blended {
  border: 4px solid #ffff00;
  box-shadow: 0 0 0 1px #ffd700, 0 0 0 4px #3b82f6;
}

.pdf-snapshot .session-units {
  font-size: 11px;
  color: #555;
  margin-top: 2px;
  font-style: italic;
}

/* Original @media print rules (kept for actual print functionality) */
@media print {
  /* Ensure box-sizing for predictable layout */
  *, *:before, *:after {
    box-sizing: border-box;
  }

  /* Prevent elements from breaking across pages */
  .avoid-page-break,
  .session-block,
  .task-card,
  .college-tab,
  h1, h2, h3, h4, h5, h6,
  p {
    break-inside: avoid;
    -webkit-column-break-inside: avoid;
    page-break-inside: avoid;
  }

  /* Force page breaks */
  .page-break-after {
    break-after: page;
    page-break-after: always;
  }

  /* Preserve textarea formatting */
  .pdf-textarea-replacement,
  .pdf-input-replacement {
    white-space: pre-wrap;
    word-wrap: break-word;
    display: block;
  }

  /* Ensure colors are printed */
  body,
  .timetable-container,
  .timetable,
  .session-block {
    -webkit-print-color-adjust: exact;
    color-adjust: exact;
    print-color-adjust: exact;
  }

  /* Hide UI-only elements */
  .noprint,
  .ui-controls,
  button,
  .no-export,
  #openSidebarBtn,
  #closeSidebarBtn,
  #semesterSelector,
  #college-tabs-container {
    display: none !important;
  }

  /* Optimize timetable for printing */
  .timetable-main-grid {
    break-inside: avoid;
    page-break-inside: avoid;
  }

  /* Ensure proper margins */
  body {
    margin: 20mm;
    padding: 0;
  }

  /* Optimize text rendering */
  body {
    font-size: 11pt;
    line-height: 1.5;
  }

  /* Remove shadows and unnecessary styling */
  .shadow-lg,
  .shadow-md,
  .shadow {
    box-shadow: none !important;
  }

  /* Ensure backgrounds are visible */
  .bg-white {
    background-color: white !important;
  }

  .bg-gray-100 {
    background-color: #f3f4f6 !important;
  }

  /* Optimize table rendering */
  table {
    border-collapse: collapse;
    width: 100%;
  }

  th, td {
    border: 1px solid #d1d5db;
    padding: 8px;
  }

  th {
    background-color: #007bff !important;
    color: white !important;
  }

  /* Prevent image scaling issues */
  img {
    max-width: 100%;
    height: auto;
  }

  /* Optimize links for printing */
  a {
    text-decoration: underline;
  }

  /* Ensure proper spacing */
  .p-4 {
    padding: 16px;
  }

  .mb-4 {
    margin-bottom: 16px;
  }

  .mt-4 {
    margin-top: 16px;
  }

  /* Fix time labels and hours at bottom */
  .time-label {
    break-inside: avoid;
    page-break-inside: avoid;
  }

  .time-slot {
    break-inside: avoid;
    page-break-inside: avoid;
  }

  /* Ensure content doesn't get cut off */
  .day-column {
    break-inside: avoid;
    page-break-inside: avoid;
  }
}

/* Screen-only styles */
@media screen {
  .pdf-only {
    display: none;
  }
}

/* Print-only styles */
@media print {
  .screen-only {
    display: none !important;
  }

  .pdf-only {
    display: block;
  }
}
